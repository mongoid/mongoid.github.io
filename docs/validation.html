<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta content='A Ruby ODM for MongoDB' name='description' />
    <meta content='mongoid, mongodb, ruby, rails, odm, durran jordan' name='keywords' />
    <link href="/stylesheets/coderay.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/site.css" media="screen" rel="stylesheet" type="text/css" />
    <title>Mongoid: Validation</title>
  </head>
  <body>
    <div id='container'>
      <div class='navigation'>
        <a href="/"><img src="/images/mongoid-logo-small.png" />
        </a>
        
        <ul class='navigation'>
          <li class='area'><a class="area" href="/">home</a></li>
          <li class='area'><a class="area" href="/docs.html">docs</a></li>
          <li><a class="section" href="/docs/installation.html">installation</a></li>
          <li><a class="section" href="/docs/documents.html">documents</a></li>
          <li><a class="section" href="/docs/persistence.html">persistence</a></li>
          <li><a class="section" href="/docs/querying.html">querying</a></li>
          <li><a class="section" href="/docs/relations.html">relations</a></li>
          <li><a class="section" href="/docs/callbacks.html">callbacks</a></li>
          <li><a class="section active" href="/docs/validation.html">validation</a></li>
          <li><a class="section" href="/docs/indexing.html">indexing</a></li>
          <li><a class="section" href="/docs/extras.html">extras</a></li>
          <li><a class="section" href="/docs/rails.html">rails</a></li>
          <li><a class="section" href="/docs/extensions.html">extensions</a></li>
          <li><a class="section" href="/docs/upgrading.html">upgrading</a></li>
          <li><a class="section" href="/docs/contributing.html">contributing</a></li>
          <li class='area'><a class="area" href="/performance.html">performance</a></li>
          <li class='area'><a class="area" href="/credits.html">credits</a></li>
          <li class='area'><a class="area" href="/links.html">links</a></li>
        </ul>
      </div>
      <div class='main'>
        <div class='header'>
          <a href="http://twitter.com/mongoid/"><img src="/images/twitter-logo.png" />
          </a>
          <a href="http://github.com/mongoid/"><img src="/images/github-logo.png" />
          </a>
        </div>
        <div class='content'>
          <h1>validations</h1>
          <p>
            Mongoid includes <tt>ActiveModel::Validation</tt> to supply the basic validation plus an
            additional associated and uniqueness validator.
          </p>
          <p>
            See <tt><a href="http://github.com/rails/rails/blob/master/activemodel/lib/active_model/validations.rb">ActiveModel::Validations</a></tt> documentation for more information.
          </p>
          <p>Common options that can be passed to all validations:</p>
          <ul>
            <li>
              <tt>:allow_nil</tt> Specify whether to validate on a nil attribute.
            </li>
            <li>
              <tt>:if</tt> Only run if the supplied value evaluates to true.
            </li>
            <li>
              <tt>:on</tt> Only run when specified, supports <tt>:create</tt> and <tt>:update</tt>.
            </li>
            <li>
              <tt>:unless</tt> Only run if the supplied value evaluates to false.
            </li>
          </ul>
          <p>
            In addition to those validations, information is provided with each macro
            about its specific options.
          </p>
          <h4><tt>validates_acceptance_of</tt></h4>
          <p>
            <i>Validate the acceptance of a boolean field:</i>
          </p>
          <p>Options:</p>
          <ul>
            <li>
              <tt>:message</tt> Supply a custom error message.
            </li>
            <li>
              <tt>:accept</tt> Specify the accepted value.
            </li>
          </ul>
          <div class="CodeRay">
            <div class="code"><pre>validates_acceptance_of <span class="sy">:terms</span>&#x000A;</pre></div>
          </div>
          <h4><tt>validates_associated</tt></h4>
          <p>
            <i>Validate associated documents along with the parent:</i>
          </p>
          <p>Options:</p>
          <ul>
            <li>
              <tt>:message</tt> Supply a custom error message.
            </li>
          </ul>
          <div class="CodeRay">
            <div class="code"><pre>validates_associated <span class="sy">:addresses</span>, <span class="sy">:employers</span>&#x000A;</pre></div>
          </div>
          <h4><tt>validates_confirmation_of</tt></h4>
          <p>
            <i>Validate confirmation of a field via an accessor with "_confirmation" as its suffix:</i>
          </p>
          <p>Options:</p>
          <ul>
            <li>
              <tt>:message</tt> Supply a custom error message.
            </li>
          </ul>
          <div class="CodeRay">
            <div class="code"><pre>validates_confirmation_of <span class="sy">:password</span>&#x000A;</pre></div>
          </div>
          <h4><tt>validates_exclusion_of</tt></h4>
          <p>
            <i>Validate items are excluded from a collection:</i>
          </p>
          <p>Options:</p>
          <ul>
            <li>
              <tt>:in</tt> A list or range the item must not be included in.
            </li>
            <li>
              <tt>:message</tt> Supply a custom error message.
            </li>
          </ul>
          <div class="CodeRay">
            <div class="code"><pre>validates_exclusion_of <span class="sy">:employers</span>, <span class="ke">in</span>: [<span class="s"><span class="dl">&quot;</span><span class="k">Hashrocket</span><span class="dl">&quot;</span></span>]&#x000A;</pre></div>
          </div>
          <h4><tt>validates_format_of</tt></h4>
          <p>
            <i>Validate the format of a field:</i>
          </p>
          <p>Options:</p>
          <ul>
            <li>
              <tt>:in</tt> A list or range the item must not be included in.
            </li>
            <li>
              <tt>:allow_blank</tt> Specify whether to validate blank attributes.
            </li>
            <li>
              <tt>:with</tt> The regular expression to match against.
            </li>
            <li>
              <tt>:without</tt> The regular expression to check it does not match.
            </li>
            <li>
              <tt>:message</tt> Supply a custom error message.
            </li>
          </ul>
          <div class="CodeRay">
            <div class="code"><pre>validates_format_of <span class="sy">:title</span>, <span class="ke">with</span>: <span class="rx"><span class="dl">/</span><span class="k">[A-Za-z]</span><span class="dl">/</span></span>&#x000A;</pre></div>
          </div>
          <h4><tt>validates_inclusion_of</tt></h4>
          <p>
            <i>Validate the inclusion of an item in a collection:</i>
          </p>
          <p>Options:</p>
          <ul>
            <li>
              <tt>:allow_blank</tt> Specify whether to validate blank attributes.
            </li>
            <li>
              <tt>:in</tt> The list or range the check the value against.
            </li>
            <li>
              <tt>:message</tt> Supply a custom error message.
            </li>
          </ul>
          <div class="CodeRay">
            <div class="code"><pre>validates_inclusion_of <span class="sy">:employers</span>, <span class="ke">in</span>: [<span class="s"><span class="dl">&quot;</span><span class="k">Hashrocket</span><span class="dl">&quot;</span></span>]&#x000A;</pre></div>
          </div>
          <h4><tt>validates_length_of</tt></h4>
          <p>
            <i>Validate the length of a field:</i>
          </p>
          <p>Options:</p>
          <ul>
            <li>
              <tt>:allow_blank</tt> Specify whether to validate blank attributes.
            </li>
            <li>
              <tt>:in</tt> Specify the range the length of the attribute can fall within.
            </li>
            <li>
              <tt>:maximum</tt> Specify the maximum length of the attribute.
            </li>
            <li>
              <tt>:message</tt> Supply a custom error message.
            </li>
            <li>
              <tt>:minimum</tt> Specify the minimum length of the attribute.
            </li>
            <li>
              <tt>:tokenizer</tt> A block to define how the string should be broken up.
            </li>
            <li>
              <tt>:too_long</tt> Define a custom message if the attribute is too long.
            </li>
            <li>
              <tt>:too_short</tt> Define a custom message if the attribute is too short.
            </li>
            <li>
              <tt>:within</tt> Specify the range the length of the attribute can fall within.
            </li>
            <li>
              <tt>:wrong_length</tt> Define a custom message for an incorrect length.
            </li>
          </ul>
          <div class="CodeRay">
            <div class="code"><pre>validates_length_of <span class="sy">:password</span>, <span class="ke">minimum</span>: <span class="i">8</span>, <span class="ke">maximum</span>: <span class="i">16</span>&#x000A;</pre></div>
          </div>
          <h4><tt>validates_numericality_of</tt></h4>
          <p>
            <i>Validate the numericality of a field:</i>
          </p>
          <p>Options:</p>
          <ul>
            <li>
              <tt>:equal_to</tt> Specify a value the field must be exactly.
            </li>
            <li>
              <tt>:even</tt> Set that the value must be even.
            </li>
            <li>
              <tt>:greater_than</tt> Specify a value the field must be greater than.
            </li>
            <li>
              <tt>:greater_than_or_equal_to</tt>
              Specify a value the field must be greater than or equal to.
            </li>
            <li>
              <tt>:less_than</tt>
              Specify a value the field must be less than.
            </li>
            <li>
              <tt>:less_than_or_equal_to</tt> Specify a value the field must be less than or equal to.
            </li>
            <li>
              <tt>:message</tt> Supply a custom error message.
            </li>
            <li>
              <tt>:odd</tt> Set that the value must be odd.
            </li>
            <li>
              <tt>:only_integer</tt> Set whether the value has to be an integer.
            </li>
          </ul>
          <div class="CodeRay">
            <div class="code"><pre>validates_numericality_of <span class="sy">:age</span>, <span class="ke">even</span>: <span class="pc">true</span>&#x000A;</pre></div>
          </div>
          <h4><tt>validates_presence_of</tt></h4>
          <p>
            <i>Validate that a field exists:</i>
          </p>
          <p>Options:</p>
          <ul>
            <li>
              <tt>:message</tt> Supply a custom error message.
            </li>
          </ul>
          <div class="CodeRay">
            <div class="code"><pre>validates_presence_of <span class="sy">:first_name</span>&#x000A;</pre></div>
          </div>
          <h4><tt>validates_uniqueness_of</tt></h4>
          <p>
            <i>Validate that the field is unique in the database:</i>
          </p>
          <p>
            Note that for embedded documents, this will only check that the
            field is unique within the context of the parent document, not the
            entire database.
          </p>
          <p>Options:</p>
          <ul>
            <li>
              <tt>:message</tt> Supply a custom error message.
            </li>
            <li>
              <tt>:case_sensitive</tt> Whether to use case sensitive matching. Defaults to true.
            </li>
            <li>
              <tt>:scope</tt> Scope uniqueness checks to the value of this field.
            </li>
          </ul>
          <div class="CodeRay">
            <div class="code"><pre>validates_uniqueness_of <span class="sy">:ssn</span></pre></div>
          </div>
        </div>
        <div class='footer'>
          Mongoid, 2009-2011, written and maintained by
          <a href="http://github.com/durran">Durran Jordan</a>.
        </div>
        <div class='clear'></div>
      </div>
    </div>
  </body>
</html>
